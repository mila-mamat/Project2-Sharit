{{!-- navbar  --}}
<nav class="navbar is-fixed-top is-dark">
  <div class="container">
    {{!-- sharit logo  --}}
    <div class="navbar-brand">
      <a class="navbar-item has-text-weight-bold is-size-3" href="/">
        Shar <span>it</span>
      </a>
      <div class="navbar-burger burger" data-target="nav-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    {{!-- navbar menu --}}
    <div id="nav-menu" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/">
          Home
        </a>
        <a class="navbar-item is-active" href="/profile/{{userInfo.currentUser}}">
          Profile
        </a>
        <a class="navbar-item" href="/logout">
          Log Out
        </a>
      </div>
    </div>
  </div>
</nav>


<div class="columns mt-3em">
  <div class="column">
    <div class="columns is-mobile ">
      <div class="column is-half is-offset-one-quarter has-text-centered">
        <div class="columns is-mobile is-centered mt-1em">
          <div class="profile-container">
            <figure class="image is-profile is-128x128">
              <img class="is-rounded" src="{{userInfo.dataValues.profile_photo}}" alt="profile photo">
          

              {{!-- working on this  --}}
              <form id="avatar-form"  class="edit-option" action="/api/users/avatar" method="post" enctype="multipart/form-data">
                <div>
                  <label for="profile_photo" class="middle change-profile-btn is-clickable">Edit</label>
                  <input id="profile_photo" style="display:none" type="file" name="profile_photo">
                </div>
              </form>
       
            </figure>
          </div>
        </div>


        <div class="field is-horizontal mt-3em">
          <div class="field-label is-normal ">
            <label class="label">Username</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.username}}">
                {{else}}
                <label>{{userInfo.dataValues.username}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>

        <div class="field is-horizontal">
          <div class="field-label is-normal ">
            <label class="label">FirstName</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.first_name}}">
                {{else}}
                <label>{{userInfo.dataValues.first_name}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">LastName</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.last_name}}">
                {{else}}
                <label>{{userInfo.dataValues.last_name}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>

        <div class="field is-horizontal ">
          <div class="field-label is-normal">
            <label class="label">BirthDate</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.birthdate}}">
                {{else}}
                <label>{{userInfo.dataValues.birthdate}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal ">
          <div class="field-label is-normal">
            <label class="label">Gender</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.sex}}">
                {{else}}
                <label>{{userInfo.dataValues.sex}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal ">
          <div class="field-label is-normal">
            <label class="label">City</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.city}}">
                {{else}}
                <label>{{userInfo.dataValues.city}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal ">
          <div class="field-label is-normal">
            <label class="label">Province</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.province_state}}">
                {{else}}
                <label>{{userInfo.dataValues.province_state}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Country</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                {{#if userInfo.dataValues.isProfileOwner}}
                <input class="input is-small" type="text" placeholder="{{userInfo.dataValues.country}}">
                {{else}}
                <label>{{userInfo.dataValues.country}}</label>
                {{/if}}
              </div>
            </div>
          </div>
        </div>
        {{#if userInfo.dataValues.isProfileOwner}}
          <button id="profileUpdateBtn"class="button is-black">Update</button>
        {{/if}}
      </div>
    </div>
  </div>
</div>

</div>




<hr />

<main id="main-content">
  {{!-- display posts for current user  --}}
  <div class="grid m-2em">
    {{!-- grid-sizer required for the masonry working --}}
    <div class="grid-sizer"></div>

    {{#each userInfo.Posts}}

    <div class="grid-item">
      <div class="card">
        <header class="card-header">
          <h2 class='card-header-title'>Post date:</h2>

          {{!--HERE: get post modified data from database         //need to format it --}}
          <time class="post-date">{{dataValues.createdAt}}</time>
        </header>

        <div class="card-content">
          <div class="content">
            {{dataValues.text}}



            {{!--HERE: get post post photo from database, if exists--}}
            {{#if dataValues.post_photo}}
            <img src="{{dataValues.post_photo}}" alt="post photo">

            {{/if}}
          </div>
        </div>
        <footer class="card-footer">
          <a href="" class="card-footer-item"><i class="far fa-heart"> {{dataValues.likeNum}}</i></a>
          <a href="post/{{dataValues.id}}" class="card-footer-item"><i class="far fa-comment"> {{dataValues.commentNum}}</i></a>


      
          <a href="" class="card-footer-item edit-option"><i class="far fa-trash-alt"></i></a>
          <a href="" class="card-footer-item edit-option"><i class="far fa-edit"></i></a>
     
        </footer>
      </div>
    </div>

    {{/each}}

  </div>


</main>

<link rel="stylesheet" href="../stylesheets/profile.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.js"></script>
<script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.js"></script>


<script type="text/javascript" src="../js/profile.js"></script>